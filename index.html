<!DOCTYPE html>
<html lang="en">
<head> 
  <meta charset="UTF-8" />
  <title>Karaoke Auto Video</title>
  <style>
    html, body {
      margin: 0;
      padding: 0;
      background: black;
      overflow: hidden;
    }
    canvas {
      display: block;
    }
  </style>
</head>
<body>

<canvas id="canvas"></canvas>

<script src="https://cdn.jsdelivr.net/npm/ccapture.js@1.1.0/build/CCapture.all.min.js"></script>
<script src="https://cdnjs.cloudflare.com/ajax/libs/gsap/3.12.2/gsap.min.js"></script>

<script>
const canvas = document.getElementById('canvas');
const ctx = canvas.getContext('2d');
canvas.width = 1280;
canvas.height = 720;

const text = "Discover 10 ways to start a business without money";
const words = text.split(" ");
const wordDelays = 0.5; // seconds
const fontSize = 48;
const font = `${fontSize}px Arial`;
ctx.font = font;

let currentWord = 0;
let elapsedTime = 0;
let startTime = null;
let wordTimings = [];

for (let i = 0; i < words.length; i++) {
  wordTimings.push(i * wordDelays);
}

const capturer = new CCapture({ format: 'webm', framerate: 30 });

function drawWords(timestamp) {
  if (!startTime) {
    startTime = timestamp;
    capturer.start();
  }

  elapsedTime = (timestamp - startTime) / 1000;
  ctx.clearRect(0, 0, canvas.width, canvas.height);
  ctx.fillStyle = 'white';
  ctx.textAlign = 'center';

  // Combine all words and calculate x starting point
  const metrics = ctx.measureText(text);
  const totalWidth = metrics.width;
  let x = canvas.width / 2 - totalWidth / 2;
  let y = canvas.height / 2;

  let drawnText = "";
  for (let i = 0; i < words.length; i++) {
    const w = words[i];
    const measure = ctx.measureText(drawnText + w);
    let wordX = canvas.width / 2 - totalWidth / 2 + measure.width;

    ctx.fillStyle = elapsedTime >= wordTimings[i] ? 'yellow' : 'white';
    ctx.fillText(w, wordX, y);
    drawnText += w + " ";
  }

  capturer.capture(canvas);

  if (elapsedTime < wordTimings[words.length - 1] + 2) {
    requestAnimationFrame(drawWords);
  } else {
    capturer.stop();
    capturer.save();
  }
}

requestAnimationFrame(drawWords);
</script>

</body>
</html>